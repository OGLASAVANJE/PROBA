<!-- HTML za prikaz poslednjeg posta sa https://oglasi.infooglasi.rs/oglasi/oglasialeksinac/ -->
<div id="oglasialeksinac-latest-post-container" class="oglasialeksinac-container">
    <a id="oglasialeksinac-latest-post-link" href="#" target="_blank" class="oglasialeksinac-link" rel="noopener">
        <!-- Slika unutar okvira -->
        <img id="oglasialeksinac-latest-post-image" src="#" alt="Latest Post Image" class="oglasialeksinac-image" />
        <!-- Naslov unutar okvira -->
        <h2 id="oglasialeksinac-latest-post-title" class="oglasialeksinac-title">Latest Post Title</h2>
    </a>
</div>

<style>
/* Glavni okvir */
.oglasialeksinac-container {
    border: 2px solid #333;
    padding: 10px;
    max-width: 100%;
    margin: 20px auto;
    cursor: pointer;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    display: flex;
    flex-direction: column;
    align-items: center;
    box-sizing: border-box;
    overflow: hidden; /* Sprečava pojavu klizača */
    height: 500px; /* Ograničavamo visinu na 500px */
}

/* Slika unutar okvira */
.oglasialeksinac-image {
    width: 100%;
    height: auto; /* Održava proporcije slike */
    display: block;
    margin-bottom: 10px;
    max-height: 350px; /* Ograničavamo visinu slike */
    object-fit: contain; /* Održava proporcije slike unutar datog prostora */
}

/* Naslov unutar okvira */
.oglasialeksinac-title {
    font-size: 20px;
    text-align: center;
    margin: 10px 0 0 0;
    color: #333;
    word-wrap: break-word; /* Omogućava prelom teksta ako je predug */
}

/* Link bez dekoracija */
.oglasialeksinac-link {
    text-decoration: none;
    color: inherit;
    display: block;
    width: 100%;
    text-align: center;
    overflow: hidden; /* Sprečava prekomerno širenje */
    max-height: 100%;
}
</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
function fetchOglasialeksinacLatestPost() {
    var wordpressURL = "https://oglasi.infooglasi.rs/oglasi/oglasialeksinac/wp-json/wp/v2/posts?per_page=1&_embed";

    $.ajax({
        url: wordpressURL,
        dataType: 'json',
        success: function(data) {
            if (data && data.length > 0) {
                var latestPost = data[0];
                var postTitle = latestPost.title.rendered || "Untitled";
                var postImageURL = latestPost._embedded && latestPost._embedded["wp:featuredmedia"] ? latestPost._embedded["wp:featuredmedia"][0].source_url : "default_image.jpg";
                var postURL = latestPost.link || "#";

                postTitle = $('<textarea>').html(postTitle).text();
                $('#oglasialeksinac-latest-post-image').attr('src', postImageURL);
                $('#oglasialeksinac-latest-post-title').text(postTitle);
                $('#oglasialeksinac-latest-post-link').attr('href', postURL);
            } else {
                $('#oglasialeksinac-latest-post-title').text("Nema dostupnih postova.");
            }
        },
        error: function(xhr, status, error) {
            $('#oglasialeksinac-latest-post-title').text("Došlo je do greške.");
        }
    });
}

// Pozivanje funkcije za dobijanje poslednjeg posta kada se stranica učita
$(document).ready(function() {
    fetchOglasialeksinacLatestPost();

    // Dodajemo event za klik
    $('#oglasialeksinac-latest-post-container').click(function() {
        var postURL = $('#oglasialeksinac-latest-post-link').attr('href');
        // Otvori novi prozor sa postom
        window.open(postURL, '_blank');
    });
});
</script>
